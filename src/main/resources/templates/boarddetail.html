<!DOCTYPE html>
<html lang="en"  xmlns:th="http://www.thymeleaf.org" xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
      layout:decorate="~{fragments/layout}" xmlns:sec="http://www.w3.org/1999/xhtml">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Document</title>
  <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css">
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
</head>
<body layout:fragment="content">
<script>

const baseUrl = window.location.pathname;   //posts    //posts/novel
var id = baseUrl.replace("/board/", "");

//update.js와 유사
$(document).ready(function(){
    loadPost();
});

//update.js와 같음
function loadPost(){
    $.ajax({
        url: "/api/board/"+id,
        type: "get",
        success: function(data){
            replacePost(data);

        },
        error: function(error){
            alert(error.responseJSON.message);
            window.location.replace("/");
        }
    });
}


function replacePost(post){
    document.querySelector("#title").innerHTML = post.board_title;
    document.querySelector("#price").innerHTML = post.board_price
    document.querySelector("#contents").innerHTML = post.board_contents;


     var previewDiv = document.getElementById('thumbnail');
           console.log(previewDiv);
           previewDiv.src = "/resources/user/"+post.board_thumbnail;

<!--    if(post.memberIsSeller == true){-->
<!--        document.querySelector("#postMenu")-->
<!--        .innerHTML = `-->
<!--            <a href="/item/edit/${id}">수정</a>-->
<!--            <a href="#" onclick="deletePost()">삭제</a>-->
<!--        `;-->
<!--    }-->



}


function deletePost(){

    var question = confirm("게시글을 삭제하시겠습니까?");
    if(question == false){
        return;
    }

    $.ajax({
        url: "/api/item/"+id,
        type: "delete",
        success: function(data){
            alert("게시글이 삭제되었습니다");
            window.location.replace("/item/list");
        },
        error: function(error){
            alert(error.responseText);
            window.location.replace("/item/list");
        }
    });

}

</script>
<div class="container mt-4">
  <div class="row">
    <div class="col-md-8">
      <img src="" alt="tumbnail" id="thumbnail">
      <div class="card">
        <div class="card-header">
          <h2 id="title">게시글 제목</h2>
        </div>
        <div class="card-body" style="min-height:500px">
          <h6 class="card-subtitle mb-2 text-muted">작성자: 홍길동 | 작성일: 2023-11-02</h6>
          <p class="card-text" id="contents">게시글 내용이 들어가는 부분입니다.</p>
        </div>
      </div>
      <div class="mt-4">
        <h3>댓글 목록</h3>
        <div class="card mt-2">
          <div class="card-body">
            <h6 class="card-subtitle mb-2 text-muted">댓글 작성자: 이몽룡 | 작성일: 2023-11-02</h6>
            <p class="card-text">댓글 내용이 들어가는 부분입니다.</p>
          </div>
        </div>
        <form class="mt-4">
          <div class="form-group">
            <textarea class="form-control" rows="3" placeholder="댓글을 입력하세요."></textarea>
          </div>
          <button type="submit" class="btn btn-primary">댓글 작성</button>
        </form>
      </div>
    </div>
    <div class="col-md-4">
      <div class="card">
        <div class="card-header">
          <h4>가격 정보</h4>
        </div>
        <div class="card-body">
          <p class="card-text" id="price">₩10,000</p>
          <button type="button" class="btn btn-primary btn-block">문의하기</button>
          <button type="button" class="btn btn-success btn-block">결제하기</button>
        </div>
      </div>
    </div>
  </div>
</div>

</body>
</html>