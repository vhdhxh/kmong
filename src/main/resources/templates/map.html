<!DOCTYPE html >
<html xmlns:th="http://www.thymeleaf.org" xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
      layout:decorate="~{fragments/layout}">
<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0, user-scalable=no">
  <title>간단한 지도 표시하기</title>
  <script type="text/javascript" src="https://oapi.map.naver.com/openapi/v3/maps.js?ncpClientId=wtwbp7cc08"></script>
  <script type="text/javascript" src="https://openapi.map.naver.com/openapi/v3/maps.js?clientId=wtwbp7cc08&submodules=geocoder"></script>

</head>
<body layout:fragment="content">
<div id="map" style="width:100%;height:400px;"></div>

<script th:inline="javascript">

<!--var data = [[${address}]];-->

<!--var XX;-->
<!--var YY;-->


<!--naver.maps.Service.geocode({ address: data[2].user_address }, function(status, response) {-->
<!--    if (status === naver.maps.Service.Status.ERROR) {-->
<!--        return alert('Something wrong!');-->
<!--    }-->



<!--XX = response.result.items[0].point.x;-->
<!--YY = response.result.items[0].point.y;-->
<!--console.log(XX);-->
<!--console.log(YY);-->
<!--    // 성공 시의 response 처리-->
<!--});-->


<!--var mapOptions = {-->
<!--    center: new naver.maps.LatLng(37.5675389, 127.0290455),-->
<!--    zoom: 15-->
<!--};-->

<!--var map = new naver.maps.Map('map', mapOptions);-->

<!--var marker = new naver.maps.Marker({-->

<!--position: new naver.maps.LatLng(YY,XX),map: map-->

<!--});-->

  var data = /*[[${address}]]*/ [];
    var mapOptions = {
        center: new naver.maps.LatLng(37.5675389, 127.0290455),
        zoom: 15
    };

    var map = new naver.maps.Map('map', mapOptions);

    naver.maps.Service.geocode({ address: data[2].user_address }, function(status, response) {
        if (status === naver.maps.Service.Status.ERROR) {
            return alert('Something wrong!');
        }

        var XX = response.result.items[0].point.x;
        var YY = response.result.items[0].point.y;

        console.log(XX);
        console.log(YY);

        // 성공 시의 response 처리

        var marker = new naver.maps.Marker({
            position: new naver.maps.LatLng(YY, XX),
            map: map
        });
    });
</script>
</body>
</html>